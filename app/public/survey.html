<!DOCTYPE html>
<!-- saved from url=(0042)https://friend-finder.herokuapp.com/survey -->
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

    <title>FriendFinder</title>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css"
          integrity="sha384-/Y6pD6FV/Vv2HJnA6t+vslU6fwYXjCFtcEpHbNJ0lyAFsXTsjBbfaDjzALeQsN6M" crossorigin="anonymous">
    <script
            src="https://code.jquery.com/jquery-3.2.1.min.js"
            integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
            crossorigin="anonymous"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js"
            integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4"
            crossorigin="anonymous"></script>

    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/js/bootstrap.min.js"
            integrity="sha384-h0AbiXch4ZDo7tp9hKZ4TsHbi047NrKGLO3SEJAg45jXxnGIfYzk4Si90RDIqNm1"
            crossorigin="anonymous"></script>

    <link rel="stylesheet" href="css/font-awesome.min.css">

</head>
<body>

<div class="container">
    <h2>Survey Questions</h2>
    <hr>

    <h3><strong>About You</strong></h3>
    <h4>Name (Required)</h4>
    <input type="text" name="" id="name" class="form-control form-input" required="">

    <h4>Link to Photo Image (Required)</h4>
    <input type="text" name="" id="photo" class="form-control form-input" required="">

    <hr>

    <h3><strong>Question 1</strong></h3>

    <form>
        <div class="form-group">
            <label for="q1"><h4>At times I have very much wanted to leave home.</h4></label>
            <select class="form-control select-dropdown" id="q1">
                <option>1 (Strongly Disagree)</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
                <option>5 (Strongly Agree)</option>
            </select>
        </div>

        <div class="form-group">
            <label for="q2"><h4>I see things or animals or people around me that others do not see.</h4></label>
            <select class="form-control select-dropdown" id="q2">
                <option>1 (Strongly Disagree)</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
                <option>5 (Strongly Agree)</option>
            </select>
        </div>
        <div class="form-group">
            <label for="q3"><h4>I think a great many people exaggerate their misfortunes in order to gain the sympathy
                and help of others.</h4></label>
            <select class="form-control select-dropdown" id="q3">
                <option>1 (Strongly Disagree)</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
                <option>5 (Strongly Agree)</option>
            </select>
        </div>
        <div class="form-group">
            <label for="q4"><h4>I think a great many people exaggerate their misfortunes in order to gain the sympathy
                and help of others.</h4></label>
            <select class="form-control select-dropdown" id="q4">
                <option>1 (Strongly Disagree)</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
                <option>5 (Strongly Agree)</option>
            </select>
        </div>
        <div class="form-group">
            <label for="q5"><h4>I think a great many people exaggerate their misfortunes in order to gain the sympathy
                and help of others.</h4></label>
            <select class="form-control select-dropdown" id="q5">
                <option>1 (Strongly Disagree)</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
                <option>5 (Strongly Agree)</option>
            </select>
        </div>
        <div class="form-group">
            <label for="q6"><h4>I think a great many people exaggerate their misfortunes in order to gain the sympathy
                and help of others.</h4></label>
            <select class="form-control select-dropdown" id="q6">
                <option>1 (Strongly Disagree)</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
                <option>5 (Strongly Agree)</option>
            </select>
        </div>
        <div class="form-group">
            <label for="q7"><h4>I think a great many people exaggerate their misfortunes in order to gain the sympathy
                and help of others.</h4></label>
            <select class="form-control select-dropdown" id="q7">
                <option>1 (Strongly Disagree)</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
                <option>5 (Strongly Agree)</option>
            </select>
        </div>
        <div class="form-group">
            <label for="q8"><h4>I think a great many people exaggerate their misfortunes in order to gain the sympathy
                and help of others.</h4></label>
            <select class="form-control select-dropdown" id="q8">
                <option>1 (Strongly Disagree)</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
                <option>5 (Strongly Agree)</option>
            </select>
        </div>
        <div class="form-group">
            <label for="q9"><h4>I think a great many people exaggerate their misfortunes in order to gain the sympathy
                and help of others.</h4></label>
            <select class="form-control select-dropdown" id="q9">
                <option>1 (Strongly Disagree)</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
                <option>5 (Strongly Agree)</option>
            </select>
        </div>
        <div class="form-group">
            <label for="q10"><h4>I think a great many people exaggerate their misfortunes in order to gain the sympathy
                and help of others.</h4></label>
            <select class="form-control select-dropdown" id="q10">
                <option>1 (Strongly Disagree)</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
                <option>5 (Strongly Agree)</option>
            </select>
        </div>

    </form>

    <br>

    <!-- Submit Button -->
    <button type="submit" class="btn btn-primary btn-lg btn-block" id="submit">
        <i class="fa fa-check-circle" aria-hidden="true"></i>Submit
    </button>
</div>

<!-- Modal -->
<div id="resultsModal" class="modal fade" role="dialog">
    <div class="modal-dialog">
        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">Ã—</button>
                <h2 class="modal-title"><strong>Best Match</strong></h2>
            </div>
            <div class="modal-body">
                <h2 id="matchName"></h2>
                <img id="matchImg" src="./img/3435aa3.jpg" alt="">
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>

    </div>
</div>

<script type="text/javascript">

    // Capture the form inputs
    $("#submit").on("click", function () {

        // Form validation
        function validateForm() {
            var isValid = true;
            $('.select-dropdown').each(function () {
                console.log("selected: " + $(this).find(":selected").text());
                if ($(this).find(":selected").text() === '') {
                    isValid = false;
                }
            });

            $('.form-input').each(function () {
                console.log("input: " + $(this).val());
                if ($(this).val() === '') {
                    isValid = false;
                }
            });
            return isValid;
        }

        // If all required fields are filled
        if (validateForm()) {
            // Create an object for the user's data
            var userData = {
                name: $("#name").val(),
                photo: $("#photo").val(),
                scores: [$("#q1").val(), $("#q2").val(), $("#q3").val(), $("#q4").val(), $("#q5").val(), $("#q6").val(), $("#q7").val(), $("#q8").val(), $("#q9").val(), $("#q10").val(),]
            }

            console.log(JSON.stringify(userData,null,2));

            // Grab the URL of the website
            var currentURL = window.location.origin;

            // AJAX post the data to the friends API.
            $.post(currentURL + "/api/friends", userData, function (data) {

                // Grab the result from the AJAX post so that the best match's name and photo are displayed.
                $("#matchName").text(data.name);
                $('#matchImg').attr("src", data.photo);

                // Show the modal with the best match
                $("#resultsModal").modal('toggle');
            });
        }
        else {
            alert("Please fill out all fields before submitting!");
        }

        return false;
    });


</script>


</body>
</html>
